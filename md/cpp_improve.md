# C++の進化と主な変更点
C++は、時代と共に進化を続け、その表現力と効率性が大きく向上してきた。
この章では、C++11以降にて導入された主要な機能や変更点を概観し、各バージョンがもたらした技術的な進展を示す。

___

__この章の構成__

<!-- index 1-3 -->

## C++11の主な新規機能
### 一般機能

|機能                                                          |説明                                                                        |
|:-------------------------------------------------------------|:---------------------------------------------------------------------------|
|[型推論](---)(auto)                                           |変数や、式の型の推論                                                        |
|[decltype](---)                                               |式の型を取得                                                                |
|[構文|範囲for文](---)                                         |インデックス変数なしのfor文                                                 |
|[オブジェクトと生成|初期化子リストコンストラクタ](---)        |vector<int> v = {1, 2, 3}; など。                                           |
|[一様初期化](---)                                          　 |コンストラクタの呼び出しを、波カッコで行う。|vector<int> v{1, 2, 3};        |
|[expressionと値カテゴリ|rvalue](---)/[moveセマンティクス](---)|[オブジェクトと生成|オブジェクトの所有権](---)の移転、高速化。              |
|[構文|ラムダ式](---)                                          |関数オブジェクトをその場に書く                                              |
|noexcept                                                      |関数の例外指定、例外を投げる可能性のある式かbool値を返す演算子              |
|constexpr                                                     |定数式の宣言。「[const/constexprインスタンス](---)」参照                    |
|nullptr                                                       |ヌルポインタを表すポインタ[リテラル](---)                                   |
|インライン名前空間                                            |ネストした名前空間に透過的にアクセスする。「[スコープ|名前空間](---)」参照  |
|ユーザー定義リテラル                                          |[ユーザ定義リテラル演算子]により定義されたリテラル                          |


### 型に対する機能

|機能                                                          |説明                                                                      |
|:-------------------------------------------------------------|:-------------------------------------------------------------------------|
|[オブジェクトと生成|特殊メンバ関数](---)のdefault/delete 宣言|自動定義される特殊関数の制御                                               |
|[委譲コンストラクタ](---)                                    |コンストラクタから他のコンストラクタに処理を委譲する                       |
|[NSDMI](---)                                                 |非staticメンバ変数の宣言と同時に初期値指定する                             |
|[継承コンストラクタ](---)                                    |基底クラスのコンストラクタの継承                                           |
|virtual関数のoverride/final宣言                              |「[オーバーライド](---)」参照                                              |
|変換演算子のオーバーロードのexplicit宣言                     |「 [演算子オーバーロード](---)」参照                                       |
|friend 宣言の対象を拡張                                      |「[StaticStringの開発](---)」参照                                          |
|メンバ関数の[rvalue修飾](---)/[lvalue修飾](---)              |オブジェクトの[expressionと値カテゴリ](---)での呼び出し可能であることの指定|
|スコープドenum                                               |スコープを持ち、型付の強いenum。「[enum](---)」参照                        |
|unionの保持できるオブジェクトの拡張                          |unionでクラスオブジェクトをもつことを許                                    |

### テンプレートに対する機能

|機能                                |説明                                                                                       |
|:-----------------------------------|:------------------------------------------------------------------------------------------|
|テンプレート引数の指定に>>の許可    |vector<list<int>> のような記述の許可。「[|テンプレートメタプログラミング](---)」参照       |
|[extern template](---)              |テンプレートのインスタンス化の抑止                                                         |
|エイリアステンプレート              |エイリアスをテンプレート化。「[is_same_templの実装](---)」参照                             |
|[パラメータパック](---)             |任意の数のテンプレートパラメータを受け取れるようにする                                     |
|テンプレートパラメータ型の制限の緩和|ローカル型と無名型を、テンプレート引数として使用することを許可                             |
|任意の式による[SFINAE](---)         |特定の式が[ill-formed](---)か否かで、その関数をオーバーロード解決に含めるかどうかを決定する|
|テンプレートのエクスポート機能      |削除                                                                                       |


### スレッドに関する機能

|機能                                                    |説明                                                                                |
|:-------------------------------------------------------|:-----------------------------------------------------------------------------------|
|スレッドローカルストレージ                              |スレッドごとに異なる静的記憶域に保持される変数                                      |
|ブロックスコープのstatic変数初期化のスレッドセーフ化    |関数ローカルで定義したstatic変数の初期化をスレッドセーフに。「[Singleton](---)」参照|


### その他のユーティリティ

|機能                            |説明                                                                             |
|:-------------------------------|:--------------------------------------------------------------------------------|
|戻り値の型を後置する関数宣言構文|「[戻り値型](---)」参照                                                          |
|コンパイル時アサート            |コンパイル時に条件式が真であることをassertする。「[assertion](---)」参照         |
|[生文字列リテラル](---)         |文字列リテラルにRプレフィックスを付けることで、エスケープシーケンスを無視する。  |
|char16_tとchar32_t              |UTF-16とUTF-32の文字型                                                           |
|UTF-8文字列リテラル             |char の文字列をUTF-8エンコーディングするプレフィックス                           |
|属性構文                        |[[attr]]構文による属性指定。[[noreturn]]など。「[return文](---)」参照            |
|alignas                         |アライメントを指定する。「[固定長メモリプール](---)」参照                        |
|alignof                         |アライメントを取得する。「[固定長メモリプール](---)」参照                        |


### stdの変更、追加
#### stdコンテナ
コンテナ全般が[moveセマンティクス](---)に対応したため、
テンプレートのパラメータTが、コピー構築可能(is_copy_constructible\<T\>== true)な型だけでなく、
ムーブ構築(is_move_constructible)のみ可能な型も受け付けるられるようになった。
push_back()やinsert()等の要素追加のためのメンバ関数が、
新たな要素のコピーだけでなく、emplace() 、emplace_back() 、emplace_front()のような名称のメンバ関数は、
[expressionと値カテゴリ|rvalue](---)オブジェクトも受け取れて、
move挿入ができるようになった(「[その他のテンプレートテクニック](---)」参照)。

|機能                            |説明                                                                                |
|:-------------------------------|:-----------------------------------------------------------------------------------|
|std::array                      |このコンテナは固定長配列クラスを表す「[型とインスタンス|配列](---)」参照)。         |
|[std::forward_list](---)        |このは単方向リンクリストの実装である。                                              |
|[std::unordered_map](---)       |同一キーの要素を複数格納しない、格納順が規定されていない連想配列の実装であるである。|
|[std::unordered_set](---)       |同一キーの要素を複数格納できず、格納順が規定されていないコンテナである。            |
|[std::type_index](---)          |型情報型を連想コンテナのキーとして使用するためのクラス。                            |

#### C++11/stdコンテナの使用例
##### std::forward_list

```cpp
    // @@@ example/cpp_improve/cpp11_ut.cpp #0:0 begin -1
```

##### std::unordered_map

```cpp
    // @@@ example/cpp_improve/cpp11_ut.cpp #0:1 begin -1
```

##### std::unordered_set

```cpp
    // @@@ example/cpp_improve/cpp11_ut.cpp #0:2 begin -1
```

##### std::type_index

```cpp
    // @@@ example/cpp_improve/cpp11_ut.cpp #0:3 begin -1
```


